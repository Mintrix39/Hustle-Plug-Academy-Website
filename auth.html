<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login / Sign Up - Hustle Academy</title>
    <link rel="stylesheet" href="style.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Google Sign-In Library -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div class="auth-page">
        <div class="auth-container">
            <div class="auth-header">
                <div class="auth-logo">Hustle Academy</div>
                <p class="auth-subtitle">Start your journey to financial freedom</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchTab('login')">Login</button>
                <button class="auth-tab" onclick="switchTab('signup')">Sign Up</button>
            </div>

            <div class="auth-forms">
                <!-- Login Form -->
                <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
                    <div class="error-message" id="loginError"></div>
                    <div class="success-message" id="loginSuccess"></div>

                    <div class="form-group">
                        <label for="loginEmail">Email Address <span>*</span></label>
                        <div class="input-wrapper">
                            <span class="input-icon"><i class="fa-solid fa-message"></i></span>
                            <input 
                                type="email" 
                                id="loginEmail" 
                                placeholder="your@email.com" 
                                required
                            >
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="loginPassword">Password <span>*</span></label>
                        <div class="input-wrapper">
                            <span class="input-icon"><i class="fa-solid fa-lock"></i></span>
                            <input 
                                type="password" 
                                id="loginPassword" 
                                placeholder="Enter your password" 
                                required
                            >
                            <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">
                                <i class="fa-regular fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>

                    <div class="forgot-password">
                        <a href="#" onclick="alert('Password reset feature coming soon!'); return false;">Forgot Password?</a>
                    </div>

                    <button type="submit" class="submit-btn">
                        <span>Login to Account</span>
                    </button>

                    <div class="divider">
                        <span>or continue with</span>
                    </div>

                    <div class="social-login">
                        <!-- Google Sign-In Button -->
                        <div id="g_id_onload"
                             data-client_id="658690157307-uh9i796tga2d7plnfsfkmfl79515uevl.apps.googleusercontent.com"
                             data-context="signin"
                             data-ux_mode="popup"
                             data-callback="handleGoogleSignIn"
                             data-auto_prompt="false">
                        </div>
                        
                        <div class="google-signin-wrapper">
                            <div class="g_id_signin"
                                 data-type="standard"
                                 data-shape="rectangular"
                                 data-theme="filled_black"
                                 data-text="signin_with"
                                 data-size="large"
                                 data-logo_alignment="left"
                                 data-width="350">
                            </div>
                        </div>
                    </div>
                </form>

                <!-- Signup Form -->
                <form id="signupForm" class="auth-form" onsubmit="handleSignup(event)">
                    <div class="error-message" id="signupError"></div>
                    <div class="success-message" id="signupSuccess"></div>

                    <div class="form-group">
                        <label for="signupName">Full Name <span>*</span></label>
                        <div class="input-wrapper">
                            <span class="input-icon"><i class="fa-solid fa-person-dots-from-line"></i></span>
                            <input 
                                type="text" 
                                id="signupName" 
                                placeholder="" 
                                required
                            >
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="signupEmail">Email Address <span>*</span></label>
                        <div class="input-wrapper">
                            <span class="input-icon"></span>
                            <input 
                                type="email" 
                                id="signupEmail" 
                                placeholder="" 
                                required
                            >
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="signupPassword">Password <span>*</span></label>
                        <div class="input-wrapper">
                            <span class="input-icon"><i class="fa-solid fa-lock"></i></span>
                            <input 
                                type="password" 
                                id="signupPassword" 
                                placeholder="Create a strong password" 
                                required
                                minlength="6"
                            >
                            <button type="button" class="password-toggle" onclick="togglePassword('signupPassword')">
                                üëÅÔ∏è
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password <span>*</span></label>
                        <div class="input-wrapper">
                            <span class="input-icon"><i class="fa-solid fa-lock"></i></span>
                            <input 
                                type="password" 
                                id="confirmPassword" 
                                placeholder="Confirm your password" 
                                required
                            >
                            <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">
                                üëÅÔ∏è
                            </button>
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="agreeTerms" required>
                        <label for="agreeTerms">I agree to the Terms & Conditions</label>
                    </div>

                    <button type="submit" class="submit-btn">
                        <span>Create Account</span>
                    </button>

                    <div class="divider">
                        <span>or sign up with</span>
                    </div>

                    <div class="social-login">
                        <!-- Google Sign-In Button for Signup -->
                        <div class="google-signin-wrapper">
                            <div class="g_id_signin"
                                 data-type="standard"
                                 data-shape="rectangular"
                                 data-theme="filled_black"
                                 data-text="signup_with"
                                 data-size="large"
                                 data-logo_alignment="left"
                                 data-width="350">
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="back-home">
                <a href="mainplug.html">‚Üê Back to Home</a>
            </div>
        </div>
    </div>

    <script>
        // IMPORTANT: Replace with your actual Google Client ID
        const GOOGLE_CLIENT_ID = '658690157307-uh9i796tga2d7plnfsfkmfl79515uevl.apps.googleusercontent.com';

        // Tab Switching
        function switchTab(tab) {
            const tabs = document.querySelectorAll('.auth-tab');
            const forms = document.querySelectorAll('.auth-form');
            
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                tabs[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                tabs[1].classList.add('active');
                document.getElementById('signupForm').classList.add('active');
            }
            
            clearMessages();
        }

        // Password Toggle
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                button.innerHTML = '<i class="fa-regular fa-eye-slash"></i>';
            } else {
                input.type = 'password';
                button.innerHTML = '<i class="fa-regular fa-eye"></i>';
            }
        }

        // Clear Messages
        function clearMessages() {
            const messages = document.querySelectorAll('.error-message, .success-message');
            messages.forEach(msg => {
                msg.style.display = 'none';
                msg.textContent = '';
            });
        }

        // Show Message
        function showMessage(type, message, formType) {
            const messageEl = document.getElementById(`${formType}${type === 'error' ? 'Error' : 'Success'}`);
            messageEl.textContent = message;
            messageEl.style.display = 'block';
            
            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 5000);
        }

        // Handle Login
        function handleLogin(event) {
            event.preventDefault();
            clearMessages();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            if (!email || !password) {
                showMessage('error', 'Please fill in all fields', 'login');
                return;
            }
            
            const userData = {
                name: email.split('@')[0],
                email: email,
                loggedIn: true,
                loginMethod: 'email',
                loginDate: new Date().toISOString()
            };
            
            localStorage.setItem('user', JSON.stringify(userData));
            showMessage('success', 'Login successful! Redirecting...', 'login');
            
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 1500);
        }

        // Handle Signup
        function handleSignup(event) {
            event.preventDefault();
            clearMessages();
            
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            if (!name || !email || !password || !confirmPassword) {
                showMessage('error', 'Please fill in all fields', 'signup');
                return;
            }
            
            if (password.length < 6) {
                showMessage('error', 'Password must be at least 6 characters', 'signup');
                return;
            }
            
            if (password !== confirmPassword) {
                showMessage('error', 'Passwords do not match', 'signup');
                return;
            }
            
            if (!agreeTerms) {
                showMessage('error', 'Please agree to the Terms & Conditions', 'signup');
                return;
            }
            
            const userData = {
                name: name,
                email: email,
                loggedIn: true,
                loginMethod: 'email',
                signupDate: new Date().toISOString()
            };
            
            localStorage.setItem('user', JSON.stringify(userData));
            showMessage('success', 'Account created successfully! Redirecting...', 'signup');
            
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 1500);
        }

        // Google Sign-In Callback Handler
        function handleGoogleSignIn(response) {
            try {
                // Decode JWT token
                const responsePayload = parseJwt(response.credential);
                
                console.log('Google Sign-In Success:');
                console.log('- User ID:', responsePayload.sub);
                console.log('- Name:', responsePayload.name);
                console.log('- Email:', responsePayload.email);
                console.log('- Picture:', responsePayload.picture);
                
                // Create user object
                const userData = {
                    id: responsePayload.sub,
                    name: responsePayload.name,
                    email: responsePayload.email,
                    picture: responsePayload.picture,
                    loggedIn: true,
                    loginMethod: 'google',
                    loginDate: new Date().toISOString()
                };
                
                // Store user data
                localStorage.setItem('user', JSON.stringify(userData));
                
                // Show success message
                const currentForm = document.querySelector('.auth-form.active').id === 'loginForm' ? 'login' : 'signup';
                showMessage('success', 'Google Sign-In successful! Redirecting...', currentForm);
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1500);
                
            } catch (error) {
                console.error('Google Sign-In Error:', error);
                showMessage('error', 'Google Sign-In failed. Please try again.', 'login');
            }
        }

        // Helper function to decode JWT
        function parseJwt(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(
                atob(base64)
                    .split('')
                    .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))
                    .join('')
            );
            return JSON.parse(jsonPayload);
        }

        // Check if user is already logged in
        window.addEventListener('DOMContentLoaded', () => {
            const user = localStorage.getItem('user');
            if (user) {
                const userData = JSON.parse(user);
                if (userData.loggedIn) {
                    window.location.href = 'dashboard.html';
                }
            }
        });
    </script>
</body>
</html>